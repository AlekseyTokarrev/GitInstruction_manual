# **Инструкция по работе с git**

## Что это и для чего нужна система контроля версий?
Программное обеспечение контроля версий рекомендуется для продуктивных команд разработчиков и команд DevOps. Управление версиями помогает отдельным разработчикам работать быстрее, а командам по разработке ПО — сохранять эффективность и гибкость по мере увеличения числа разработчиков..

### Что такое система контроля версий?

За последние несколько десятилетий системы контроля версий (Version Control Systems, VCS) стали гораздо более совершенными, причем некоторым это удалось лучше других. Системы VCS иногда называют инструментами SCM (управления исходным кодом) или RCS (системой управления редакциями). Один из наиболее популярных на сегодняшний день инструментов VCS называется Git. Git относится к категории распределенных систем контроля версий, известных как DVCS (эта тема будет рассмотрена подробнее чуть позже). Git, как и многие другие популярные и доступные на сегодняшний день системы VCS, распространяется бесплатно и имеет открытый исходный код. Независимо от того, какую систему контроля версий вы используете и как она называется, основные ее преимущества заключаются в следующем.

### Для чего нужна система контроля версий

1. Полная история изменений каждого файла за длительный период. Это касается всех изменений, внесенных огромным количеством людей за долгие годы. Изменением считается создание и удаление файлов, а также редактирование их содержимого. Различные инструменты VCS отличаются тем, насколько хорошо они обрабатывают операции переименования и перемещения файлов. В историю также должны входить сведения об авторе, дата и комментарий с описанием цели каждого изменения. Наличие полной истории позволяет возвращаться к предыдущим версиям, чтобы проводить анализ основных причин возникновения ошибок и устранять проблемы в старых версиях программного обеспечения. Если над программным обеспечением ведется активная работа, то «старой версией» можно считать почти весь код этого ПО.

2. Ветвление и слияние. Эти возможности полезны не только при одновременной работе участников команды: отдельные сотрудники также могут пользоваться ими, занимаясь несколькими независимыми направлениями. Создание «веток» в инструментах VCS позволяет иметь несколько независимых друг от друга направлений разработки, а также выполнять их слияние, чтобы инженеры могли проверить, что изменения, внесенные в каждую из веток, не конфликтуют друг с другом. Многие команды разработчиков ПО создают отдельные ветки для каждой функциональной возможности, для каждого релиза либо и для того, и для другого. Имея множество различных рабочих процессов, команды могут выбирать подходящий для них способ ветвления и слияния в VCS.

3. Отслеживаемость. Возможность отслеживать каждое изменение, внесенное в программное обеспечение, и связывать его с ПО для управления проектами и отслеживания багов, например Jira, а также оставлять к каждому изменению комментарий с описанием цели и назначения изменения может помочь не только при анализе основных причин возникновения ошибок, но и при других операциях по исследованию. История с комментариями во время чтения кода помогает понять, для чего этот код нужен и почему он структурирован именно так. Благодаря этому разработчики могут вносить корректные и совместимые изменения в соответствии с долгосрочным планом разработки системы. Это особенно важно для эффективной работы с унаследованным кодом, поскольку дает специалистам возможность точнее оценить объем дальнейших задач.

Разрабатывать программное обеспечение можно и без управления версиями, но такой подход подвергает проект огромному риску, и ни одна профессиональная команда не порекомендует применять его. Таким образом, вопрос заключается не в том, использовать ли управление версиями, а в том, какую систему управления версиями выбрать.

## Установка git и VSCode на ваш ПК.

### Установка VSCode на ваш ПК.
Отлично, теперь мы можем установить программу. Переходим на [сайт](https://code.visualstudio.com/), секция Download. Здесь есть версия под Mac, Linux. Нас интересует Windows. Нажимаем и скачиваем себе на ПК. К

### Установка git на ваш ПК
Загрузите и установите Git для Windows <https://git-scm.com/download/win>. После установки Git доступен из командной строки или PowerShell. Рекомендуется выбрать значения по умолчанию во время установки, если их не нужно изменить.

Git для Windows не обновляется автоматически. Чтобы обновить Git для Windows, скачайте новую версию установщика, которая обновляет Git для Windows и сохраняет все параметры.

#### Первая настройка git
Первое, что вам следует сделать после установки Git — указать ваше имя и адрес электронной почты. Это важно, потому что каждый коммит в Git содержит эту информацию, и она включена в коммиты, передаваемые вами, и не может быть далее изменена:

$ git config --global user.name "John Doe"  

$ git config --global user.email johndoe@example.com 

Опять же, если указана опция --global, то эти настройки достаточно сделать только один раз, поскольку в этом случае Git будет использовать эти данные для всего, что вы делаете в этой системе. Если для каких-то отдельных проектов вы хотите указать другое имя или электронную почту, можно выполнить эту же команду без параметра --global в каталоге с нужным проектом.

## Создание и базовая работа с локальным репозиторием.

### Что такое репозиторий и инструкция по созданию локальных репозиториев.
Репозиторий Git — это папка, в которую Git отслеживает изменения. На компьютере может быть любое количество репозиториев, хранящихся в собственной папке. Каждый репозиторий Git в системе является независимым, поэтому изменения, сохранённые в одном репозитории Git, не влияют на содержимое другого.

Существует два варианта создания репозитория Git:

* Создание репозитория из существующего кода. Используйте команду git init, чтобы создать репозиторий из существующей папки на компьютере. Затем добавьте все файлы в папку в первую фиксацию с помощью следующих команд: git add --all, git commit -m «Initial commit».

* Создание репозитория из удалённого репозитория. Используйте команду git clone, чтобы скопировать содержимое существующего репозитория в папку на компьютере.

### Базовая работа с локальным репозиторием

Базовые команды  
*git init* — создание репозитория.  
Команда git init создает в директории пустой репозиторий в виде директории .git, где и будет в дальнейшем храниться вся информация об истории коммитов, тегах — о ходе разработки проекта.
*git add* и *git rm* — индексация изменений.  
Следующее, что нужно знать — команда git add. Она позволяет внести в индекс — временное хранилище — изменения, которые затем войдут в коммит.
Из индекса и дерева проекта одновременно файл можно удалить командой git rm.

*git status* — состояние проекта, измененные и не добавленные файлы, индексированные файлы
Команду git status, пожалуй, можно считать самой часто используемой наряду с командами коммита и индексации. Она выводит информацию обо всех изменениях, внесенных в дерево директорий проекта по сравнению с последним коммитом рабочей ветки; отдельно выводятся внесенные в индекс и неиндексированные файлы. 

*git commit* — совершение коммита
Коммит — базовое понятие во всех системах контроля версий, поэтому совершаться он должен легко и по возможности быстро. 

*git reset* — возврат к определенному коммиту, откат изменений, «жесткий» или «мягкий»
Помимо работы с индексом, git reset позволяет сбросить состояние проекта до какого-либо коммита в истории. В git данное действие может быть двух видов: «мягкого»(soft reset) и «жесткого» (hard reset).

«Мягкий» (с ключом --soft) резет оставит нетронутыми ваши индекс и все дерево файлов и директорий проекта, вернется к работе с указанным коммитом.

*git log* — разнообразная информация о коммитах в целом
Иногда требуется получить информацию об истории коммитов; коммитах, изменивших отдельный файл; коммитах за определенный отрезок времени и так далее. Для этих целей используется команда git log.


## Ветки. Локальная работа с ветками в git.

### Что такое ветки и для чего они нужны при работе с системой контроля версий.
Ветки в системе контроля версий Git используются в следующих случаях:

* Для работы над одним и тем же проектом или файлом одновременно несколькими программистами, не мешая друг другу.

* Для тестирования экспериментальных функций. Чтобы не повредить основному проекту, создается новая ветка специально для экспериментов. Если эксперимент удался, изменения с экспериментальной ветки переносятся на основную. Если нет — новая ветка удаляется, а проект остается нетронутым.

* Для разных выходящих параллельно релизов одного проекта. Например, в репозитории Python могут быть две ветки: python-2 и python-3.

### Базовая работа с ветками в git.
*git branch* — создание, перечисление и удаление веток.  
Работа с ветками — очень легкая процедура в git, все необходимые механизмы сконцентрированы в одной команде.

Создаёт новую ветку new-branch:

git branch new-branch


Удаляет ветку, если та была залита (merged) с разрешением возможных конфликтов в текущую:
git branch -d new-branch

Удаляет ветку в любом случае:
git branch -D new-branch

Переименовывает ветку:
git branch -m new-name-branch

Показывывает те ветки, среди предков которых есть определенный коммит:
git branch --contains v1.2

Показывает коммит ответвления ветки new-name-branch от ветки master:
git merge-base master new-name-branch
git checkout — переключение между ветками, извлечение файлов
Команда git checkout позволяет переключаться между последними коммитами.

**git merge** — слияние веток, разрешение возможных конфликтов
Слияние веток, в отличие от обычной практики централизованных систем, в git происходит практически каждый день. Естественно, что имеется удобный интерфейс к популярной операции.

git cherry-pick — применение к дереву проекта изменений, внесенных отдельным коммитом
Если ведется сложная история разработки, с несколькими длинными ветками разработками, может возникнуть необходимость в применении изменений, внесенных отдельным коммитом одной ветки, к дереву другой (активной в настоящий момент).

## Работа с удаленными репозиториями.

### Что такое удаленный репозиторий и для чего он нужен
Удаленный репозиторий – это репозиторий, размещенный в локальной или интернет сети. Удаленный репозиторий используется для того, чтобы делиться и обмениваться кодом между разработчиками в рамках сети. Его также можно использовать, если вы разрабатываете проект на нескольких устройствах.

### Базовая работа с удаленными репозиториями GitHub
Удалённые репозитории представляют собой версии вашего проекта, сохранённые в интернете или ещё где-то в сети. У вас может быть несколько удалённых репозиториев, каждый из которых может быть доступен для чтения или для чтения-записи. Взаимодействие с другими пользователями предполагает управление удалёнными репозиториями, а также отправку и получение данных из них. Управление репозиториями включает в себя как умение добавлять новые, так и умение удалять устаревшие репозитории, а также умение управлять различными удалёнными ветками, объявлять их отслеживаемыми или нет и так далее. В данном разделе мы рассмотрим некоторые из этих навыков.  

Для того, чтобы просмотреть список настроенных удалённых репозиториев, вы можете запустить команду *git remote*. Она выведет названия доступных удалённых репозиториев. Если вы клонировали репозиторий, то увидите как минимум origin — имя по умолчанию, которое Git даёт серверу, с которого производилось клонирование.

**Добавление удалённых репозиториев**

Для того, чтобы добавить удалённый репозиторий и присвоить ему имя (shortname), просто выполнить команду git remote add 
_"shortname"_ _"url"_

## Совместная работа над проектом (fork, pull request)
Совместная работа ведется путем передачи наборов изменений между рабочими копиями разработчиков и центральным репозиторием. Однако модель распределенной совместной работы в Git предполагает, что каждый разработчик использует собственную копию репозитория со своей локальной историей и структурой веток. Обычно пользователи делятся не отдельными наборами изменений, а сериями коммитов. Вместо того чтобы выполнять коммит одного набора изменений из рабочей копии в центральный репозиторий, Git позволяет передавать между репозиториями целые ветки.

Для получения данных из удалённых проектов, следует выполнить:

$ git fetch [remote-name]

Данная команда связывается с указанным удалённым проектом и забирает все те данные проекта, которых у вас ещё нет. После того как вы выполнили команду, у вас должны появиться ссылки на все ветки из этого удалённого проекта, которые вы можете просмотреть или слить в любой момент.

Когда вы клонируете репозиторий, команда clone автоматически добавляет этот удалённый репозиторий под именем «origin». Таким образом, git fetch origin извлекает все наработки, отправленные на этот сервер после того, как вы его клонировали (или получили изменения с помощью fetch). Важно отметить, что команда git fetch забирает данные в ваш локальный репозиторий, но не сливает их с какими-либо вашими наработками и не модифицирует то, над чем вы работаете в данный момент. Вам необходимо вручную слить эти данные с вашими, когда вы будете готовы.

Если ветка настроена на отслеживание удалённой ветки, то вы можете использовать команду **git pull** чтобы автоматически получить изменения из удалённой ветки и слить их со своей текущей. Этот способ может для вас оказаться более простым или более удобным. К тому же, по умолчанию команда **git clone** автоматически настраивает вашу локальную ветку master на отслеживание удалённой ветки master на сервере, с которого вы клонировали репозиторий. Название веток может быть другим и зависит от ветки по умолчанию на сервере. Выполнение git pull, как правило, извлекает (fetch) данные с сервера, с которого вы изначально клонировали, и автоматически пытается слить (merge) их с кодом, над которым вы в данный момент работаете.

Когда вы хотите поделиться своими наработками, вам необходимо отправить их в удалённый репозиторий. Команда для этого действия простая: git push <remote-name> <branch-name>. Чтобы отправить вашу ветку master на сервер origin (повторимся, что клонирование обычно настраивает оба этих имени автоматически), вы можете выполнить следующую команду для отправки ваших коммитов:

$ git push origin master
Эта команда срабатывает только в случае, если вы клонировали с сервера, на котором у вас есть права на запись, и если никто другой с тех пор не выполнял команду push. Если вы и кто-то ещё одновременно клонируете, затем он выполняет команду push, а после него выполнить команду push попытаетесь вы, то ваш push точно будет отклонён. Вам придётся сначала получить изменения и объединить их с вашими и только после этого вам будет позволено выполнить push. Обратитесь к главе Ветвление в Git для более подробного описания, как отправлять изменения на удалённый сервер.

Если хотите получить побольше информации об одном из удалённых репозиториев, вы можете использовать команду git remote show <remote>.

На GitHub популярны две модели совместной разработки:
Модель «Fork + Pull» позволяет любому склонировать (fork) существующий репозиторий и сливать изменения в свой личный fork без необходимости иметь доступ к оригинальному репозиторию. Затем, изменения должны быть включены в исходный репозиторий его хозяином. Эта модель уменьшает количество телодвижений для новых contributors и популярна для open source проектов, так как позволяет людям работать независимо, без единого координирования.
Модель «общего репозитория» (The Shared Repository Model) чаще встречается у малых команд и организаций, работающих над закрытыми проектами. Каждый в команде имеет доступ «на запись» в один общий репозиторий, а для изолирования изменений применяются тематические ветви (topic branches).

Pull request'ы особенно полезны в модели «Fork + Pull», поскольку предоставляют способ уведомить мэйнтэйнеров проекта (т.е. хозяина оригинального репозитория) о изменениях в вашей копии репозитория. Впрочем, они так же полезны и в модели общего репозитория, где обычно используются для того, чтобы инициировать пересмотр или обсуждение кода перед тем, как включать его в основную ветвь разработки.


### Как строится и для чего нужна совместная работа в системах контроля версий
Взаимодействие просто представляет собой синхронизацию локального и удаленного репозиториев. Копирование данных из локального репозитория в удаленный в данной системе контроля версий осуществляется командой push, а обратный процесс – командой pull. Любые изменения в документе и его новые версии сохраняются в локальном репозитории. Набор всех сохраненных версий называют «деревом» проекта, и оно находится в репозитории.

Работа в системе контроля версий дает возможность сохранять промежуточные варианты проекта, плюс это еще и помогает справляться с проблемами в случае их возникновения. Когда, например, несколько программистов, работающих над одной опцией, одновременно сбросят в репозиторий созданные версии, то система в автоматическом режиме займется устранением конфликта.

### Инструкция по созданию pull request
1. Делаем копию репозитория. На странице репозитория имеется кнопка «Fork», которую и следует нажать. Скопированный Репозиторий появляется на нашей странице GitHub.
2. После чего, эту свою копию уже можно «скипировать» на свой компьютер:
git clone https://...
GIT скипирует удалённый репозиторий в локальный.
3. Необходимо сменить директори командой cd - change directory.
4. Командра git remote add origin https://...  используется для добавления удаленного репозитория и присвоения ему названия, которое используется для удобства как сокращение адреса.
1. Команда git branch -M main - переименовывает локальную ветку MASTER в main, чтобы не было конфликтов при заливке файла на GitHub.
4. Создать ветку, в которую вносить изменения.
5. Отправить изменения на свой аккаут командой git push -u origin main
6. 


## Книги и полезные ссылки по изучению git.
* Книга “ProGit” - Подробный учебник с примерами, после которого не останется вопросов по работе с Git. Больше подходит для тех, кто уже знаком с базой, а для новичков может быть сложноват. 
* Git. Базовый курс <https://gb.ru/chapters/7831>.
* (Самоучитель по GIT) [https://githowto.com/ru/git_basics].
* Подробные статьи на Хабре: 
    Цикл статей из двух частей о Git для новичков → <https://habr.com/ru/articles/541258/>

    Работаем с Git: первые шаги в GitHub → <https://habr.com/ru/companies/yandex_praktikum/articles/700708/>
    

## Альтернативные системы контроля версий.

1. Базар.
2. OpenText AccuRev.
3. Mercurial.
4. Plastic SCM.
5. Rational ClearCase.
6. Subversion.
7. AWS CodeCommit.
8. Helix Core.
9. Azure DevOps Server.

